<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>[From NAND to TETRIS] Computer Architecture 101 Part III: Computer Architecture and Assembler | Learning Automata</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="[From NAND to TETRIS] Computer Architecture 101 Part III: Computer Architecture and Assembler" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="CS foundamentals for non-CS majors" />
<meta property="og:description" content="CS foundamentals for non-CS majors" />
<link rel="canonical" href="http://blog.logancyang.com/note/compsci/2020/07/04/computer-architecture-101-part-iii.html" />
<meta property="og:url" content="http://blog.logancyang.com/note/compsci/2020/07/04/computer-architecture-101-part-iii.html" />
<meta property="og:site_name" content="Learning Automata" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-07-04T00:00:00-05:00" />
<script type="application/ld+json">
{"description":"CS foundamentals for non-CS majors","@type":"BlogPosting","headline":"[From NAND to TETRIS] Computer Architecture 101 Part III: Computer Architecture and Assembler","dateModified":"2020-07-04T00:00:00-05:00","datePublished":"2020-07-04T00:00:00-05:00","url":"http://blog.logancyang.com/note/compsci/2020/07/04/computer-architecture-101-part-iii.html","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.logancyang.com/note/compsci/2020/07/04/computer-architecture-101-part-iii.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://blog.logancyang.com/feed.xml" title="Learning Automata" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-164976898-2','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>[From NAND to TETRIS] Computer Architecture 101 Part III: Computer Architecture and Assembler | Learning Automata</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="[From NAND to TETRIS] Computer Architecture 101 Part III: Computer Architecture and Assembler" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="CS foundamentals for non-CS majors" />
<meta property="og:description" content="CS foundamentals for non-CS majors" />
<link rel="canonical" href="http://blog.logancyang.com/note/compsci/2020/07/04/computer-architecture-101-part-iii.html" />
<meta property="og:url" content="http://blog.logancyang.com/note/compsci/2020/07/04/computer-architecture-101-part-iii.html" />
<meta property="og:site_name" content="Learning Automata" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-07-04T00:00:00-05:00" />
<script type="application/ld+json">
{"description":"CS foundamentals for non-CS majors","@type":"BlogPosting","headline":"[From NAND to TETRIS] Computer Architecture 101 Part III: Computer Architecture and Assembler","dateModified":"2020-07-04T00:00:00-05:00","datePublished":"2020-07-04T00:00:00-05:00","url":"http://blog.logancyang.com/note/compsci/2020/07/04/computer-architecture-101-part-iii.html","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.logancyang.com/note/compsci/2020/07/04/computer-architecture-101-part-iii.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css"><link type="application/atom+xml" rel="alternate" href="http://blog.logancyang.com/feed.xml" title="Learning Automata" /><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-164976898-2','auto');ga('require','displayfeatures');ga('send','pageview');</script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Learning Automata</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">[From NAND to TETRIS] Computer Architecture 101 Part III: Computer Architecture and Assembler</h1><p class="page-description">CS foundamentals for non-CS majors</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-07-04T00:00:00-05:00" itemprop="datePublished">
        Jul 4, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      8 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#note">note</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#compsci">compsci</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#level-5-computer-architecture">Level 5: Computer Architecture</a>
<ul>
<li class="toc-entry toc-h3"><a href="#von-neumann-architecture">Von Neumann Architecture</a></li>
<li class="toc-entry toc-h3"><a href="#the-fetch-execute-cycle">The Fetch-Execute Cycle</a></li>
<li class="toc-entry toc-h3"><a href="#the-hack-cpu">The Hack CPU</a></li>
<li class="toc-entry toc-h3"><a href="#data-memory">Data memory</a></li>
<li class="toc-entry toc-h3"><a href="#rom32k-instruction-memory">ROM32K: Instruction memory</a></li>
<li class="toc-entry toc-h3"><a href="#putting-it-all-together">Putting it all together</a></li>
<li class="toc-entry toc-h3"><a href="#comments">Comments</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#level-6-assembler">Level 6. Assembler</a>
<ul>
<li class="toc-entry toc-h3"><a href="#the-translator-perspective">The translator perspective</a>
<ul>
<li class="toc-entry toc-h4"><a href="#step-1-handling-whitespaces">Step 1: Handling whitespaces</a></li>
<li class="toc-entry toc-h4"><a href="#step-2-translating-a-instructions">Step 2: Translating A-instructions</a></li>
<li class="toc-entry toc-h4"><a href="#step-3-translating-c-instructions">Step 3: Translating C-instructions</a></li>
<li class="toc-entry toc-h4"><a href="#step-4-handling-symbols">Step 4: Handling symbols</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#overall-assembler-logic">Overall Assembler logic</a></li>
<li class="toc-entry toc-h3"><a href="#macro-assembler-and-macro-commands">Macro assembler and macro commands</a></li>
<li class="toc-entry toc-h3"><a href="#how-was-the-first-assembler-created-in-history-without-the-assistance-of-high-level-languages">How was the first Assembler created in history without the assistance of high level languages?</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#from-nand-to-tetris-part-i-last-words">From NAND to TETRIS Part I: Last words</a></li>
<li class="toc-entry toc-h2"><a href="#reference">Reference</a></li>
</ul><p>Continuing the discussion through abstraction level 4 in the <a href="http://blog.logancyang.com/note/compsci/2020/07/02/computer-architecture-101-part-ii.html">last post</a>, we look at level 5 and level 6 in this post.</p>

<h2 id="level-5-computer-architecture">
<a class="anchor" href="#level-5-computer-architecture" aria-hidden="true"><span class="octicon octicon-link"></span></a>Level 5: Computer Architecture</h2>

<p>We are going to build the Von Neumann Architecture that is capable of executing any program.</p>

<p><img src="/images/cs4ds/vonneumann.png" alt="" align="middle"></p>

<h3 id="von-neumann-architecture">
<a class="anchor" href="#von-neumann-architecture" aria-hidden="true"><span class="octicon octicon-link"></span></a>Von Neumann Architecture</h3>

<p><img src="/images/cs4ds/infoflow.png" alt="" align="middle"></p>

<p>The CPU has ALUs and registers. The ALUs do the arithmetic and logical operations.</p>

<p>The memory holds the data and the program.</p>

<p>To move data around, there are 3 kinds of buses: the data bus, address bus, and control bus (or control wires).</p>

<p><strong>The ALU loads information from the Data bus and manipulates it using the Control bits.</strong></p>

<p>We need a two-way connection between the CPU registers and the data bus for intermediate results. We also need to connect CPU registers to the address bus (one way) because we access the memory by the memory address in the registers. So <strong>the CPU registers have both data and addresses</strong>.</p>

<p>For the memory, we need to connect the data memory to the data bus, and the program memory to the control bus.</p>

<h3 id="the-fetch-execute-cycle">
<a class="anchor" href="#the-fetch-execute-cycle" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Fetch-Execute Cycle</h3>

<p>All that the CPU does is fetch an instruction and execute it, and repeat. This is the CPU loop.</p>

<p>Fetch:</p>

<ul>
  <li>put the <strong>location</strong> of the next instruction (available from the program counter) into the <strong>address</strong> of the <strong>program memory</strong>
</li>
  <li>and then get the instruction code itself by reading the memory content at that location.</li>
</ul>

<p><img src="/images/cs4ds/fetch.png" alt="" align="middle"></p>

<p>In the execute cycle, we use the bits from the control bus and access the registers and/or the data memory to manipulate the data.</p>

<p>There is clash between fetch and execute because they access the program and data memory which are in the same physical memory. Usually, we use a multiplexor to do the fetch cycle first and remember the content of the instruction in the register, and then access the data memory. There’s a variant of the Von Neumann Architecture which is the Harvard Architecture. It physically separate the program and data memory to avoid this complication.</p>

<h3 id="the-hack-cpu">
<a class="anchor" href="#the-hack-cpu" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Hack CPU</h3>

<p>The hack CPU is the brain of the computer, it decides which instruction to execute next and how.</p>

<p>It has 3 inputs:</p>

<ol>
  <li>Data value</li>
  <li>Instruction</li>
  <li>Reset bit</li>
</ol>

<p><img src="/images/cs4ds/hackcpuinput.png" alt="" align="middle"></p>

<p>And 4 outputs:</p>

<ol>
  <li>Data value</li>
  <li>Write to memory (Y/N)</li>
  <li>Memory address</li>
  <li>Address of the next instruction</li>
</ol>

<p><img src="/images/cs4ds/hackcpuoutput.png" alt="" align="middle"></p>

<p>Here’s the Hack CPU architecture:</p>

<p><img src="/images/cs4ds/hackcpu.png" alt="" align="middle"></p>

<p>All the chips used are the ones we have built before. We just need to assemble them together in this way. The <code class="highlighter-rouge">C</code> bits are control bits.</p>

<p>Here is how the CPU recognizes and handles an A-instruction:</p>

<p><img src="/images/cs4ds/insthandling.png" alt="" align="middle"></p>

<p>Here is how the CPU recognizes and handles a C-instruction:</p>

<p><img src="/images/cs4ds/insthandling-c.png" alt="" align="middle"></p>

<p>Looking at ALU:</p>

<p><img src="/images/cs4ds/alu-inputs.png" alt="" align="middle"></p>

<p><img src="/images/cs4ds/alu-outputs.png" alt="" align="middle"></p>

<p><strong>Reset bit: program starts/restarts when reset is 1.</strong></p>

<p>Here is the control implementation and program counter logic:</p>

<p><img src="/images/cs4ds/cpucontrol.png" alt="" align="middle"></p>

<p><img src="/images/cs4ds/controlimpl.png" alt="" align="middle"></p>

<h3 id="data-memory">
<a class="anchor" href="#data-memory" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data memory</h3>

<p>Recall the overall Hack architecture:</p>

<p><img src="/images/cs4ds/hackoverall.png" alt="" align="middle"></p>

<p>Now that we have the CPU implementation, we look at the memory. It has 3 parts: the RAM part that is the data memory, plus the Screen Memory Map, and the kernel memory map.</p>

<p><img src="/images/cs4ds/ram.png" alt="" align="middle"></p>

<p>The fist part, RAM16, is already implemented in our previous sections.</p>

<p>We also went through Screen Memory Map and Keyboard Memory Map in detail before. One special feature of the Screen chip is that it can refresh the display at a frequency.</p>

<h3 id="rom32k-instruction-memory">
<a class="anchor" href="#rom32k-instruction-memory" aria-hidden="true"><span class="octicon octicon-link"></span></a>ROM32K: Instruction memory</h3>

<p><img src="/images/cs4ds/rom.png" alt="" align="middle"></p>

<p>To put a program into ROM, there are 2 ways</p>

<ul>
  <li>Burn the program onto a ROM chip, such as a CD, and run the program with the CD.</li>
  <li>Load the program which is written in a text file using <strong>hardware simulation</strong> by the built-in ROM chip.</li>
</ul>

<h3 id="putting-it-all-together">
<a class="anchor" href="#putting-it-all-together" aria-hidden="true"><span class="octicon octicon-link"></span></a>Putting it all together</h3>

<p><img src="/images/cs4ds/arch.png" alt="" align="middle"></p>

<h3 id="comments">
<a class="anchor" href="#comments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Comments</h3>

<ul>
  <li>We can have a chip that tracks the state the computer is in to make sure it performs the right set of instructions given its state. We use the concept of Finite State Machine to organize the states and their transitions.</li>
  <li>To add more peripheral input/output devices, we can allocate more segments in the memory for them.</li>
</ul>

<h2 id="level-6-assembler">
<a class="anchor" href="#level-6-assembler" aria-hidden="true"><span class="octicon octicon-link"></span></a>Level 6. Assembler</h2>

<p>For the first time in this series, this part is software. The Assembler translates the machine language to binary code that can be executed. It is the first software layer above the hardware.</p>

<p>But where do we run the Assembler if it is not already in 0s and 1s itself?</p>

<p>Since we are not building the first computer in the world, we can write the Assembler on another computer, compile it down to binary, transfer the binary to the Hack computer we are building, and use the binary directly.</p>

<p><img src="/images/cs4ds/assembler.png" alt="" align="middle"></p>

<p>The Assembler reads a line of Hack code into an character array. It ignores comments and whitespaces when breaking down the line into fields.</p>

<p>The Assember also supports symbols (variable names). The way it supports that is to store the symbol name at an address.</p>

<p><img src="/images/cs4ds/symbol-addr.png" alt="" align="middle"></p>

<p>Essentially, a symbol is just an alias for an address location.</p>

<p>It is possible in the Assembly (Hack) machine language that a “jump” symbol is used before it is declared using the <code class="highlighter-rouge">@</code> operator. One solution is to do 2 passes for the code, the first pass builds the symbol table, and the second pass uses it to correctly executes the program.</p>

<p><img src="/images/cs4ds/symbols.png" alt="" align="middle"></p>

<h3 id="the-translator-perspective">
<a class="anchor" href="#the-translator-perspective" aria-hidden="true"><span class="octicon octicon-link"></span></a>The translator perspective</h3>

<p>We have already seen the tables that map A and C instructions to binary code. Along with user symbols that are constructed by the declarations, we have all we need to do the translation.</p>

<p>We take care of</p>

<ul>
  <li>White spaces, empty line, indentation</li>
  <li>Comments, inline comments</li>
  <li>A, C instructions</li>
  <li>Symbols</li>
</ul>

<h4 id="step-1-handling-whitespaces">
<a class="anchor" href="#step-1-handling-whitespaces" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1: Handling whitespaces</h4>

<p>Let’s focus on them one by one. First we handle whitespaces for a simplified Hack program with no symbols.</p>

<p>This is the easiest one. We simply <strong>strip all whitespaces, so the program after this step has no whitespace</strong>.</p>

<h4 id="step-2-translating-a-instructions">
<a class="anchor" href="#step-2-translating-a-instructions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2: Translating A-instructions</h4>

<p>An A-instruction is just <code class="highlighter-rouge">@value</code>. In binary, we prepend the op code <code class="highlighter-rouge">0</code> for A-instruction, and convert the value in decimal to binary, add 0 paddings accordingly.</p>

<p><img src="/images/cs4ds/trans-a.png" alt="" align="middle"></p>

<h4 id="step-3-translating-c-instructions">
<a class="anchor" href="#step-3-translating-c-instructions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3: Translating C-instructions</h4>

<p>Consider <code class="highlighter-rouge">MD=D+1</code>. This C-instruction has a <code class="highlighter-rouge">dest: MD</code> and <code class="highlighter-rouge">comp: D+1</code>, with no <code class="highlighter-rouge">jump</code> field.</p>

<p>The binary syntax for C-instructions is</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1 1 1 a c1 c2 c3 c4 c5 c6 d1 d2 d3 j1 j2 j3
</code></pre></div></div>

<p>3 1s at the beginning, and fill in the <code class="highlighter-rouge">a, c, d, j</code> bits according to the table below</p>

<p><img src="/images/cs4ds/trans-c.png" alt="" align="middle"></p>

<h4 id="step-4-handling-symbols">
<a class="anchor" href="#step-4-handling-symbols" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 4: Handling symbols</h4>

<p><img src="/images/cs4ds/handle-symbol.png" alt="" align="middle"></p>

<p>For pre-defined symbols, we can simply replace them with their values based on the table below</p>

<p><img src="/images/cs4ds/pre-symbols.png" alt="" align="middle"></p>

<p>For the label symbols, they are used for <code class="highlighter-rouge">jump</code> commands.</p>

<ul>
  <li>The program uses the label to “goto” another instruction</li>
  <li>Declared with <code class="highlighter-rouge">()</code>
</li>
  <li>A label symbol points to the memory location of its next instruction. <code class="highlighter-rouge">label -&gt; mem_index_of_next_instruction</code>
</li>
</ul>

<p>When translating a label symbol, simply replace it with the value <code class="highlighter-rouge">mem_index_of_next_instruction</code>.</p>

<p>For the variable symbols, they are assigned to memory locations starting from address 16 (a designer’s decision).</p>

<p>We need a <strong>symbol table</strong> to keep track of the new and old variable symbols. It has key-value pairs of symbol name and symbol address.</p>

<p>The symbol table is initialized with all the predefined symbols and their addresses.</p>

<p>The Assembler performs <strong>2 passes</strong>. In the first pass adds the <strong>label symbols</strong> to the symbol table. The second pass adds the variable symbols to the symbol table.</p>

<p>The symbol table is an auxilary data structure that the Assembler needs to process the program. Once the processing completes, the symbol table can be tossed away.</p>

<h3 id="overall-assembler-logic">
<a class="anchor" href="#overall-assembler-logic" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overall Assembler logic</h3>

<p>Keep in mind, the Assembler is just a <strong>text processor</strong> that takes in the Assembly/Hack language and returns a file containing only two types of characters, 0 and 1. These 0s and 1s are still ASCII characters. When the computer loads it into memory it then becomes <em>real</em> 0s and 1s.</p>

<blockquote>
  <p>Although we say we are not building the world’s first computer and resort to a high level language to write this Assembler text processor, all that matters is the resulting translation directive text file. One <em>can</em> write it from scratch with hardware logic, but it’s cumbersome. It’s not that we are not able to produce this text processor without the help of a high level language. We already have all the logic we need.</p>
</blockquote>

<p><img src="/images/cs4ds/assembler-overall.png" alt="" align="middle"></p>

<p>The overall Assembler process:</p>

<p><img src="/images/cs4ds/assembler-proc.png" alt="" align="middle"></p>

<p>To implement the Assembler in a high level language like Python or Java, here’s the pseudocode:</p>

<p><img src="/images/cs4ds/assembler-pseudo.png" alt="" align="middle"></p>

<h3 id="macro-assembler-and-macro-commands">
<a class="anchor" href="#macro-assembler-and-macro-commands" aria-hidden="true"><span class="octicon octicon-link"></span></a>Macro assembler and macro commands</h3>

<p>We can make the Hack language more user friendly by adding <em>macro commands</em>. For example, we can convert</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@100
D=M
</code></pre></div></div>

<p>to</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>D=M[100]
</code></pre></div></div>

<p>To achieve this, simply add the translation logic into the Assembler.</p>

<h3 id="how-was-the-first-assembler-created-in-history-without-the-assistance-of-high-level-languages">
<a class="anchor" href="#how-was-the-first-assembler-created-in-history-without-the-assistance-of-high-level-languages" aria-hidden="true"><span class="octicon octicon-link"></span></a>How was the first Assembler created in history without the assistance of high level languages?</h3>

<p>The first Assembler was built <strong>by hand</strong>. People write the binary code for the translation process. However, we only needed to do it <strong>once</strong>. Once it’s created, people can build on it and create new Assemblers by programming.</p>

<h2 id="from-nand-to-tetris-part-i-last-words">
<a class="anchor" href="#from-nand-to-tetris-part-i-last-words" aria-hidden="true"><span class="octicon octicon-link"></span></a>From NAND to TETRIS Part I: Last words</h2>

<p>Now we have built the entire Hack computer from NAND gates!</p>

<p>Outside the classroom, it is rare that people need to work with the Assemly language. People only work with high level languages in programming unless they really need to optimize a piece of code for a specialized device.</p>

<p>The most important concept introduced here is that <strong>why computers are programmable</strong> and can do all kinds of tasks.</p>

<p><strong>We bridged the gap from hardware to software</strong>. This is the key idea we learned!</p>

<p>In <em><a href="https://www.coursera.org/learn/nand2tetris2">From NAND to TETRIS Part II</a></em>, the material will cover the software layers such as the virtual machine, the compiler, operating system, etc.</p>

<h2 id="reference">
<a class="anchor" href="#reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reference</h2>

<ul>
  <li><a href="https://www.coursera.org/learn/build-a-computer">Coursera From NAND To TETRIS</a></li>
  <li>The amazing lecturers:
    <ul>
      <li><a href="https://www.coursera.org/instructor/shimon">Shimon Schocken</a></li>
      <li><a href="https://www.coursera.org/instructor/noamnisan">Noam Nisan</a></li>
    </ul>
  </li>
</ul>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="logancyang/blog-learning-automata"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/note/compsci/2020/07/04/computer-architecture-101-part-iii.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Notes, code and essays by Logan Yang.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/logancyang" title="logancyang"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/logancyang" title="logancyang"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
